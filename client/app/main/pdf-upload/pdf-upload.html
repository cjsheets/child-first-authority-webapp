<div class="heading row">
  <h3>Upload Absence Report</h3>
</div>
<div class="upload-form row">
  <form class="form-inline" name="forms.upload" ng-submit="submit()" novalidate>
    <div class="form-group"
      ng-class="data.upload.school ? 'has-success' : 'has-error'">
      <label>School</label>
      <ui-select theme="bootstrap" ng-model="data.upload.school" ng-disabled="isTeacher" required>
        <ui-select-match placeholder="Select a school">{{$select.selected.name}}</ui-select-match>
        <ui-select-choices repeat="school in schools | filter: $select.search">
          <div ng-bind-html="school.name | highlight: $select.search"></div>
        </ui-select-choices>
      </ui-select>
    </div>
    <div class="form-group"
      ng-class="{
        'has-error': forms.upload.file.$invalid && forms.upload.file.$dirty,
        'has-success': forms.upload.file.$valid
      }">
      <label class="control-label" for="pdfInput">PDF</label>
      <input id="pdfInput"
        class="form-control"
        type="file"
        name="file"
        ng-model="data.upload.file"
        ngf-pattern="'application/pdf'"
        ngf-select
        required>
    </div>
    <button class="btn btn-primary" type="submit" ng-disabled="forms.upload.$invalid || data.upload.processingUpload">
      Submit
    </button>
  </form>
  <div ng-if="forms.upload.file.$invalid && forms.upload.file.$dirty" class="form-group has-error">
    <div ng-messages="forms.upload.file.$error" class="help-block">
      <div ng-message-exp="['required', 'pattern']">Choose an absence report PDF to upload</div>
      <div ng-message="server">{{data.upload.fileError}}</div>
    </div>
  </div>
  <div ng-if="!forms.upload.$dirty" class="form-group has-success">
    <div class="help-block">{{data.upload.message}}</div>
  </div>
</div>
