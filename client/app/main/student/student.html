<div class="student row">
  <div class="heading">
    <h3>Student Info</h3>
  </div>
  <div class="info">
    <div class="form-horizontal">
      <label class="col-sm-3 col-md-2 control-label">Name</label>
      <div class="col-sm-3 col-md-2">
        <p class="form-control-static">{{student.firstName}} {{student.lastName}}</p>
      </div>
      <label class="col-sm-3 col-md-2 control-label">Student Id</label>
      <div class="col-sm-3 col-md-2">
        <p class="form-control-static">{{student.studentId}}</p>
      </div>
      <label class="col-sm-3 col-md-2 control-label">School</label>
      <div class="col-sm-9 col-md-2">
        <p class="form-control-static">{{student.currentSchool.name}}</p>
      </div>
      <label class="col-sm-3 col-md-2 control-label">IEP</label>
      <div class="col-sm-3 col-md-6">
        <input type="checkbox" ng-model="student.iep" ng-change="updateIEP()">
      </div>
      <label class="col-sm-3 col-md-2 control-label">CFA</label>
      <div class="col-sm-3 col-md-2">
        <input type="checkbox" ng-model="student.cfa" ng-change="updateCFA()">
      </div>
    </div>
  </div>
  <div class="heading">
    <h3>Interventions and Outreaches <a href><i ng-click="addOutreach()" class="fa fa-plus-circle"></i></a></h3>
  </div>
  <div class="interventions-outreaches">
    <div class="col-lg-6 col-md-12" ng-if="student.interventions.length">
      <div class="well" ng-repeat="intervention in student.interventions">
        <dl class="dl-horizontal">
          <dt>Type</dt>
          <dd><input class="form-control" readonly value="{{intervention.type}} {{intervention.tier}}"/></dd>

          <dt>Absences</dt>
          <dd><input class="form-control" readonly value="{{intervention.absences}}"/></dd>

          <dt>Triggered On</dt>
          <dd><input class="form-control" readonly value="{{intervention.triggerDate | date:'yyyy-MM-dd'}}"/></dd>

          <dt>Action Taken</dt>
          <dd>
            <div class="input-group">
            <span class="input-group-btn">
              <button type="button" class="btn btn-success" ng-click="open($index)">
                <i class="fa fa-calendar"></i>
              </button>
            </span>
              <input type="text"
                class="form-control"
                uib-datepicker-popup="yyyy-MM-dd"
                ng-model="intervention.actionDate"
                is-open="datePopups[$index]"
                min-date="intervention.triggerDate"
                datepicker-options="dateOptions"
                close-text="Close"
                ng-change="updateActionDate(intervention)"
                readonly/>
            </div>
          </dd>

          <dt>Notes</dt>
          <dd>
            <div class="input-group">
              <input type="text" class="form-control" ng-model="intervention.newNote"/>
            <span class="input-group-btn">
              <button type="button" class="btn btn-success" ng-click="addInterventionNote(intervention)">
                <i class="fa fa-plus"></i>
              </button>
            </span>
            </div>
          </dd>
          <dd ng-repeat="note in intervention.notes | orderBy:$index:true">
            <div class="input-group">
              <input type="text" class="form-control" readonly value="{{note.note}}"/>
              <span class="input-group-addon">{{note.date | date:'yyyy-MM-dd'}}</span>
            </div>
          </dd>
        </dl>
      </div>
    </div>
    <div class="col-lg-6 col-md-12" ng-if="student.outreaches.length">
      <div class="well" ng-repeat="outreach in student.outreaches | orderBy:createdDate:true">
        <dl>
          <dd>
            <div class="btn-group" uib-dropdown>
              <i uib-dropdown-toggle class="fa fa-caret-down fa-lg toggle"></i>
              <ul uib-dropdown-menu role="menu" class="invisible-menu">
                <li role="menuitem">
                  <button
                    type="button"
                    class="btn btn-warning btn-block"
                    ng-click="toggleArchiveOutreach(outreach)">Archive<!-- todo: make label change: Archive / Unarchive -->
                    <i class="fa fa-archive"></i>
                  </button>
                </li>
                <li role="menuitem">
                  <button
                    type="button"
                    class="btn btn-danger btn-block"
                    ng-click="deleteOutreach(outreach)"
                    ng-show="outreach.archived">Delete
                    <i class="fa fa-trash"></i>
                  </button>
                </li>
              </ul>
            </div>
          </dd>
        </dl>
        <dl class="dl-horizontal">
          <dt>Outreach Type</dt>
          <dd><input class="form-control" readonly value="{{outreach.type}}"/></dd>

          <dt>Created</dt>
          <dd><input class="form-control" readonly value="{{outreach.createdDate | date:'yyyy-MM-dd'}}"/></dd>

          <dt>Notes</dt>
          <dd>
            <div class="input-group">
              <input type="text" class="form-control" ng-model="outreach.newNote"/>
            <span class="input-group-btn">
              <button
                type="button"
                class="btn btn-success" ng-click="addOutreachNote(outreach)">
                <i class="fa fa-plus"></i>
              </button>
            </span>
            </div>
          </dd>
          <dd ng-repeat="note in outreach.notes | orderBy:$index:true">
            <div class="input-group">
              <input type="text" class="form-control" readonly value="{{note.note}}"/>
              <span class="input-group-addon">{{note.date | date:'yyyy-MM-dd'}}</span>
            </div>
          </dd>
        </dl>
      </div>
    </div>
  </div>
</div>
